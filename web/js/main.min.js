"use strict";var APP=APP||{};APP.config={updateUrl:"?controller=slide&action=get&id=%d"},APP.Slide=function(e){this.id=e;var t=APP.$allSlides.filter("[data-id="+e+"]");this.$content=t.find(".slide__content"),this.$date=t.find(".slide__date"),this.$loader=t.find(".slide__loader"),this.$refresh=t.find(".slide__refresh"),this.registerEvents()},APP.Slide.prototype={registerEvents:function(){var e=this;$(this.$refresh).on("click",function(t){t.preventDefault(),APP.ajax.updateSlide(e)})}},APP.common={init:function(){APP.$fotorama=$(".fotorama-frame").on("fotorama:ready",function(e,t){}).fotorama(),APP.SlideCollection={},APP.$allSlides=$(".slide"),APP.$allSlides.each(function(e,t){var i=$(t).data("id");APP.SlideCollection[i]=new APP.Slide(i)})}},APP.ajax={updateSlide:function(e){e.$loader.addClass("-loading"),$.ajax({url:APP.config.updateUrl.replace("%d",e.id),method:"get",dataType:"json",success:function(t){console.log(t.refresh_date),e.$loader.removeClass("-loading"),e.$date.text(t.refresh_date),e.$content.html(t.html)}})}},jQuery(function(e){e(function(){APP.common.init()})});